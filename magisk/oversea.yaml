mixed-port: 7890
ipv6: true
allow-lan: true
unified-delay: false
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]

tun:
  enable: true
  stack: mixed
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

dns:
  enable: true
  ipv6: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
    - "+.market.xiaomi.com"
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://dns.google/dns-query
    - https://dns.cloudflare.com/dns-query
  proxy-server-nameserver:
    - https://doh.18bit.cn/dns-query
    - https://dns-cdn.trli.club/doh/dns
  nameserver-policy:
    "geosite:cn,private":
      - 'https://doh.apad.pro/dns-query'
      - 'https://dns-cdn.trli.club/doh/ad-dns-pro'
    "geosite:!cn,google":
      - 'https://doh.dns.sb/dns-query'
      - 'https://dns.adguard-dns.com/dns-query'

proxy-providers:
  BaiPiao:
    type: http
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/thuhollow2/myconfig/main/Clash.Meta/clashmconfig_a.yaml"
    path: ./BaiPiao1.yaml
    interval: 3600
    exclude-filter: å®˜ç½‘|å¥—é¤|å‰©ä½™|é‡ç½®|ä»¥ä¸‹|ç¦æ­¢|å¢ƒå¤–|å¢ƒå†…|æ ¡å›­|TG|ç¾¤|æ¢|åŒº
    exclude-type: http|socks5
    header:
      User-Agent:
      - "Clash.Meta"
    health-check:
      enable: true
      url: 'http://cp.cloudflare.com'
      interval: 300
      lazy: true

proxy-groups:
  - name: ğŸ‡ºğŸ‡³ OVERSEAS
    type: select
    proxies:
      - ğŸŒ AUTO
      - ğŸ”® LOAD
      - REJECT
      - DIRECT
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¹ğŸ‡¼ TW
      - ğŸ‡¸ğŸ‡¬ SG
      - ğŸ‡°ğŸ‡· KR
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡ºğŸ‡¸ US

  - name: ğŸŒ AUTO
    type: url-test
    filter: é¦™æ¸¯|å°æ¹¾|éŸ©å›½|æ—¥æœ¬|ç‹®åŸ|ç¾å›½|æ–°åŠ å¡|ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¸ğŸ‡¬|ğŸ‡°ğŸ‡·|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸
    use:
      - BaiPiao

  - name: ğŸ”® LOAD
    type: load-balance
    filter: é¦™æ¸¯|å°æ¹¾|éŸ©å›½|æ—¥æœ¬|ç‹®åŸ|ç¾å›½|æ–°åŠ å¡|ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¸ğŸ‡¬|ğŸ‡°ğŸ‡·|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸
    use:
      - BaiPiao

  - name: ğŸ‡­ğŸ‡° HK
    type: url-test
    filter: ğŸ‡­ğŸ‡°|é¦™æ¸¯
    use:
      - BaiPiao

  - name: ğŸ‡¹ğŸ‡¼ TW
    type: url-test
    filter: ğŸ‡¹ğŸ‡¼|å°æ¹¾
    use:
      - BaiPiao

  - name: ğŸ‡¸ğŸ‡¬ SG
    type: url-test
    filter: ğŸ‡¸ğŸ‡¬|ç‹®åŸ|æ–°åŠ å¡
    use:
      - BaiPiao

  - name: ğŸ‡°ğŸ‡· KR
    type: url-test
    filter: ğŸ‡°ğŸ‡·|éŸ©å›½
    use:
      - BaiPiao

  - name: ğŸ‡¯ğŸ‡µ JP
    type: url-test
    filter: ğŸ‡¯ğŸ‡µ|æ—¥æœ¬
    use:
      - BaiPiao

  - name: ğŸ‡ºğŸ‡¸ US
    type: url-test
    filter: ğŸ‡ºğŸ‡¸|ç¾å›½
    use:
      - BaiPiao

rule-providers:
  ADS-PRO:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main//Filters/AWAvenue-Ads-Rule-Clash.yaml"
    path: ./AWAvenue-Ads-Rule-Clash.yaml
    format: yaml
    interval: 86400

  ADS-MAX:
    type: http
    behavior: domain
    url: "https://adrules.top/adrules_domainset.txt"
    format: text
    interval: 86400

rules:
  - RULE-SET,ADS-PRO,REJECT
  - RULE-SET,ADS-MAX,REJECT
  - OR,((GEOSITE,GOOGLE),(GEOSITE,!CN)),ğŸ‡ºğŸ‡³ OVERSEAS
  - OR,((GEOSITE,CN),(GEOIP,CN,NO-RESOLVE)),DIRECT
  - OR,((GEOSITE,PRIVATE),(GEOIP,PRIVATE,NO-RESOLVE)),DIRECT
  - MATCH,ğŸ‡ºğŸ‡³ OVERSEAS
  - MATCH,REJECT
